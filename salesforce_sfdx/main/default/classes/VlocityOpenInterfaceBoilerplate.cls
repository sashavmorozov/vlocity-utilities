global with sharing class VlocityOpenInterfaceBoilerplate implements vlocity_cmt.VlocityOpenInterface {

    /**
     * The entry method for any class implementing Vlocity Open Interface (VOI). 
     * To be able to call Apex method from an Omniscript (via a Remote Action) - the class should implement VOI.
     *
     * @param {String} methodName - name of the invoked method
     * @param {Map<String, Object>} inputMap - input parameters in the form of key-value pairs
     * @param {Map<String, Object>} outputMap - output generated by the class in the form of key-value pairs
     * @param {Map<String, Object>} optionsMap - options parameters in the form of key-value pairs (sort of similar to input)
     * @return {nothing}
     *
     * @example
     *     TBD
     */
    global Boolean invokeMethod(String methodName, Map<String, Object> inputMap, Map<String, Object> outputMap, Map<String, Object> optionsMap) {
        Boolean result = true;

        System.debug(LoggingLevel.ERROR, 'OtterTools > VlocityOpenInterfaceBoilerplate > invokeMethod: methodName: ' + methodName);
        System.debug(LoggingLevel.ERROR, 'OtterTools > VlocityOpenInterfaceBoilerplate > invokeMethod: inputMap: ' + inputMap);

        //routing to a method that actually implement business logic
        if (methodName.equals('functionA')) {
            VlocityOpenInterfaceBoilerplate.functionA(inputMap, outputMap, optionsMap);
            return true;
        }

        if (methodName.equals('functionB')) {
            VlocityOpenInterfaceBoilerplate.functionB(inputMap, outputMap, optionsMap);
            return result;
        } 
        
        return result;
    }

    public static void functionA (Map<String, Object> inputMap, Map<String, Object> outputMap, Map<String, Object> optionsMap) {
        //retrieve input values from the input map
        final String RECORD_ID_KEY = 'recordId';        
        String recordId = (String) inputMap.get(RECORD_ID_KEY);
        
        if (String.isBlank(recordId)) {

            String message = 'Input value (' + RECORD_ID_KEY + ') is empty';
            System.debug(LoggingLevel.ERROR, 'OtterTools > VlocityOpenInterfaceBoilerplate > functionA: ' + message);

            outputMap.put('status', 'FAILED');
            outputMap.put('message', message);
            return;
        }

        System.debug(LoggingLevel.INFO, 'OtterTools > VlocityOpenInterfaceBoilerplate > functionA: input value ' + '(' + RECORD_ID_KEY + '): ' + recordId);

        /**************** BUSINESS LOGIC HERE **************/

        /** 
         * Here you can put business logic based on input parameters
         * The logic can be taken out into a separate class for readability
         * The last step is to add the results into the outputMap like this
         * outputMap.put('resultA', 'valueA');
         * outputMap.put('resultB', 'valueB');
         * Output is going to be accessible from Omniscript as well
        */


        /***************************************************/

        outputMap.put('result', 'STUB VALUE');
        outputMap.put('status', 'SUCCESS');
        outputMap.put('message', null);
    }

}